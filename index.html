<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>äº‹æ¥­ä¸»ç ”ä¿®ç‰ˆ_åŠ´åƒç½å®³ç™ºç”Ÿæ™‚ã®å¯¾å¿œ</title>
  
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CS9WF785LR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CS9WF785LR');
</script>

  <style>
    body {
      visibility: hidden; /* æ¡ˆA: åˆæœŸçŠ¶æ…‹ã§éè¡¨ç¤º */
      font-family: sans-serif;
      margin: 20px;
      background-color: #f7f7f7;
      color: #333;
    }
    .hidden {
      display: none;
    }
    .section {
      max-width: 800px;
      margin: auto;
      text-align: center;
    }
    .title {
      background-color: #0078d4;
      color: white;
      padding: 1em;
      border-radius: 8px;
      margin-bottom: 1em;
    }
    input[type="text"] {
      font-size: 1.2em;
      padding: 0.5em;
      width: 80%;
      max-width: 400px;
    }
    button {
      font-size: 1.2em;
      padding: 0.6em 1.2em;
      margin: 1em;
      cursor: pointer;
      border-radius: 8px;
      border: none;
      background-color: #0078d4;
      color: white;
    }
    button:hover {
      background-color: #106ebe;
    }
    .video-container {
      position: relative;
      width: 100%;
      max-width: 800px;
      margin: 0 auto;
      background-color: black;
      border-radius: 8px;
      overflow: hidden;
    }
    video {
      width: 100%;
      height: auto;
      display: block;
      outline: none;
    }
    /* ã‚·ãƒ¼ã‚¯ãƒãƒ¼ã¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’éè¡¨ç¤ºã«ã™ã‚‹ */
    video::-webkit-media-controls {
      display: none !important;
    }
    video::-moz-media-controls {
      display: none !important;
    }
    video::-webkit-media-controls-panel {
      display: none !important;
    }
    video::-webkit-media-controls-play-button {
      display: none !important;
    }
    video::-webkit-media-controls-timeline {
      display: none !important;
    }
    video::-webkit-media-controls-current-time-display {
      display: none !important;
    }
    video::-webkit-media-controls-time-remaining-display {
      display: none !important;
    }
    video::-webkit-media-controls-mute-button {
      display: none !important;
    }
    video::-webkit-media-controls-toggle-closed-captions-button {
      display: none !important;
    }
    video::-webkit-media-controls-volume-slider {
      display: none !important;
    }
    video::-webkit-media-controls-fullscreen-button {
      display: none !important;
    }
    #confirmationCode {
      font-weight: bold;
      font-size: 1.4em;
      margin-top: 1em;
      background-color: #e9e9e9;
      padding: 0.5em;
      border-radius: 6px;
      display: inline-block;
    }

    /* ã‚¯ã‚¤ã‚ºé–¢é€£ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .quiz-question {
      font-size: 1.3em;
      margin-bottom: 1em;
      font-weight: bold;
    }
    .quiz-options button {
      display: block;
      width: 80%;
      margin: 0.8em auto;
      padding: 0.8em;
      background-color: #e0e0e0;
      color: #333;
      border: 1px solid #ccc;
      font-size: 1.1em;
    }
    .quiz-options button:hover {
      background-color: #d0d0d0;
    }
    .quiz-message {
      font-size: 1.1em;
      margin-top: 1em;
      font-weight: bold;
    }
    .quiz-message.correct {
      color: green;
    }
    .quiz-message.incorrect {
      color: red;
    }
    #nextQuestionButton {
      margin-top: 1em;
      background-color: #0078d4;
      color: white;
    }

    /* ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼é–¢é€£ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .privacy-policy-container {
      background-color: white;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 1.5em;
      margin: 1em 0;
      text-align: left;
      max-height: 400px;
      overflow-y: auto;
      font-size: 0.9em;
      line-height: 1.6;
    }
    .privacy-policy-container h3 {
      color: #0078d4;
      margin-top: 1.5em;
      margin-bottom: 0.5em;
    }
    .privacy-policy-container h3:first-child {
      margin-top: 0;
    }
    .privacy-policy-container ul {
      margin: 0.5em 0;
      padding-left: 2em;
    }
    .privacy-policy-container li {
      margin: 0.3em 0;
    }

    /* åœ°åŸŸåˆ¶é™ã‚¨ãƒ©ãƒ¼ç”»é¢ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .geo-restriction-error {
      text-align: center;
      padding: 50px 20px;
      background-color: #f8f9fa;
      border-radius: 8px;
      margin: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .geo-restriction-error h2 {
      color: #dc3545;
      margin-bottom: 20px;
    }
    .geo-restriction-error p {
      color: #6c757d;
      font-size: 1.1em;
      margin-bottom: 15px;
    }

    /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .loading-screen {
      text-align: center;
      padding: 100px 20px;
    }
    .loading-screen h3 {
      color: #0078d4;
      margin-bottom: 20px;
    }
    .loading-spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #0078d4;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
    @media (max-width: 768px) {
      input[type="text"], button {
        width: 90%;
        max-width: none;
      }
      .section {
        max-width: 95%;
      }
      .video-container {
        max-width: 100%;
      }
      .privacy-policy-container {
        font-size: 0.8em;
        padding: 1em;
      }
    }
    @media (max-width: 480px) {
      body {
        margin: 10px;
      }
      .title h2 {
        font-size: 1.2em;
      }
      button {
        font-size: 1em;
        padding: 0.5em 1em;
      }
      .quiz-options button {
        font-size: 1em;
        padding: 0.6em;
      }
      .privacy-policy-container {
        max-height: 300px;
        font-size: 0.75em;
      }
    }

    /* ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .error-message {
      color: red;
      font-weight: bold;
      margin-top: 1em;
    }
  </style>
</head>
<body>

<!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ -->
<div class="loading-screen" id="loadingScreen">
  <h3>ã‚¢ã‚¯ã‚»ã‚¹ç¢ºèªä¸­...</h3>
  <div class="loading-spinner"></div>
  <p>ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„</p>
</div>

<!-- åœ°åŸŸåˆ¶é™ã‚¨ãƒ©ãƒ¼ç”»é¢ -->
<div class="geo-restriction-error hidden" id="geoErrorScreen">
  <h2>ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™</h2>
  <p>ã“ã®ãƒšãƒ¼ã‚¸ã¯æ—¥æœ¬å›½å†…ã‹ã‚‰ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™ã€‚</p>
  <p id="locationInfo"></p>
  <p>VPNã‚’ã”åˆ©ç”¨ã®å ´åˆã¯ã€ä¸€åº¦ç„¡åŠ¹ã«ã—ã¦ã‹ã‚‰å†åº¦ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚</p>
</div>

<!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
<div id="mainContent" class="hidden">

<div class="section">
  <div class="title">
    <h2>äº‹æ¥­ä¸»ç ”ä¿®ç‰ˆ_åŠ´åƒç½å®³ç™ºç”Ÿæ™‚ã®å¯¾å¿œ</h2>
  </div>
</div>

<!-- ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ç”»é¢ -->
<div class="section" id="privacySection">
  <h3>ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã‚’ã”ç¢ºèªãã ã•ã„</h3>
  <div class="privacy-policy-container">
    <h3>å”åŠ›æ¥­è€…ã®å—è¬›è¨˜éŒ²ã«é–¢ã™ã‚‹ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ï¼ˆå—è¬›è¨˜éŒ²ã«ã¤ã„ã¦ï¼‰</h3>
    
    <p>å¤§å´å»ºè¨­æ ªå¼ä¼šç¤¾ï¼ˆä»¥ä¸‹ã€ã€Œå½“ç¤¾ã€ã¨ã„ã„ã¾ã™ï¼‰ã¯ã€[äº‹æ¥­ä¸»ç ”ä¿®ç‰ˆ_åŠ´åƒç½å®³ç™ºç”Ÿæ™‚ã®å¯¾å¿œ]ï¼ˆä»¥ä¸‹ã€ã€Œæœ¬ã‚¢ãƒ—ãƒªã€ã¨ã„ã„ã¾ã™ï¼‰ã‚’é€šã˜ã¦å–å¾—ã™ã‚‹å”åŠ›æ¥­è€…ã®å—è¬›è¨˜éŒ²æƒ…å ±ã«ã¤ã„ã¦ã€ä»¥ä¸‹ã®ã¨ãŠã‚Šãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã‚’å®šã‚ã¾ã™ã€‚</p>
    
    <h3>1. å–å¾—ã™ã‚‹æƒ…å ±ãŠã‚ˆã³åˆ©ç”¨ç›®çš„</h3>
    <p>æœ¬ã‚¢ãƒ—ãƒªã§ã¯ã€ä»¥ä¸‹ã®æƒ…å ±ã‚’å–å¾—ã—ã€åŠ´åƒåŸºæº–ç›£ç£ç½²ã‹ã‚‰ã®æŒ‡ç¤ºã«åŸºã¥ãå”åŠ›æ¥­è€…ã®ãƒ«ãƒ¼ãƒ«å—è¬›çŠ¶æ³ã®ç¢ºèªã®ã¿ã‚’ç›®çš„ã¨ã—ã¦åˆ©ç”¨ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®æƒ…å ±ã‚’ãã®ä»–ã®ç”¨é€”ã«åˆ©ç”¨ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
    <ul>
  <li>
    <strong>å–å¾—æƒ…å ±ï¼š</strong><br>
    å—è¬›è€…åã€ä¼šç¤¾åã€å—è¬›å®Œäº†æ—¥æ™‚ã€åˆ©ç”¨ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±ï¼ˆOSã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ç¨®é¡ï¼‰
  </li>
  <li>
    <strong>åˆ©ç”¨ç›®çš„ï¼š</strong><br>
    åŠ´åƒåŸºæº–ç›£ç£ç½²ã®æŒ‡å°ã«åŸºã¥ãã€ã€Œå”åŠ›æ¥­è€…ã®åŠ´åƒç½å®³ç™ºç”Ÿæ™‚ã®å¯¾å¿œã€ã®<br>
    e-Learningå—è¬›å±¥æ­´ãŠã‚ˆã³å—è¬›çŠ¶æ³ã‚’ç®¡ç†ãƒ»ç¢ºèªã™ã‚‹ãŸã‚
  </li>
</ul>
    
    <h3>2. å€‹äººæƒ…å ±ã®å–å¾—æ–¹æ³•</h3>
    <p>æœ¬ã‚¢ãƒ—ãƒªã¯ã€å—è¬›è€…ãŒe-Learningã®å—è¬›å®Œäº†ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€å¿…è¦æƒ…å ±ã‚’å…¥åŠ›ãƒ»é€ä¿¡ã™ã‚‹ã“ã¨ã§ã€ä¸Šè¨˜ã®æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚</p>
    
    <h3>3. å€‹äººæƒ…å ±ã®å®‰å…¨ç®¡ç†</h3>
    <p>å½“ç¤¾ã¯ã€å–å¾—ã—ãŸå—è¬›è¨˜éŒ²æƒ…å ±ãŒæ¼æ´©ã€æ»…å¤±ã€æ¯€æç­‰ã‚’é˜²æ­¢ã™ã‚‹ãŸã‚ã€é©åˆ‡ãªå®‰å…¨ç®¡ç†æªç½®ã‚’è¬›ã˜ã¾ã™ã€‚æœ¬ã‚¢ãƒ—ãƒªã§å–å¾—ã•ã‚ŒãŸæƒ…å ±ã¯Googleã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ã¦å³é‡ã«ç®¡ç†ã—ã€ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã¯å¿…è¦æœ€å°é™ã®æ‹…å½“è€…ã«é™å®šã—ã¾ã™ã€‚</p>
    
    <h3>4. å€‹äººæƒ…å ±ã®ç¬¬ä¸‰è€…æä¾›</h3>
    <p>å½“ç¤¾ã¯ã€æ³•ä»¤ã«åŸºã¥ãå ´åˆï¼ˆåŠ´åƒåŸºæº–ç›£ç£ç½²ã¸ã®å ±å‘Šç­‰ï¼‰ã‚’é™¤ãã€ã‚ã‚‰ã‹ã˜ã‚å—è¬›è€…ã®åŒæ„ã‚’å¾—ã‚‹ã“ã¨ãªãã€å–å¾—ã—ãŸå—è¬›è¨˜éŒ²æƒ…å ±ã‚’ç¬¬ä¸‰è€…ã«æä¾›ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
    
    <h3>5. ãŠå•ã„åˆã‚ã›çª“å£</h3>
    <p>æœ¬ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã«é–¢ã™ã‚‹ãŠå•ã„åˆã‚ã›ã¯ã€ä»¥ä¸‹ã®çª“å£ã¾ã§ã”é€£çµ¡ãã ã•ã„ã€‚<br>
    å¤§å´å»ºè¨­æ ªå¼ä¼šç¤¾ å®‰å…¨éƒ¨ æ‹…å½“ï¼šç«¹æ¾¤<br>
    é›»è©±03-5658-5012</p>
    
    <h3>6. æœ¬ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã®å¤‰æ›´</h3>
    <p>å½“ç¤¾ã¯ã€å¿…è¦ã«å¿œã˜ã¦æœ¬ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã®å†…å®¹ã‚’æ”¹å®šã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚å¤‰æ›´å¾Œã®ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã¯ã€æœ¬ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«æ²è¼‰ã—ãŸã¨ãã‹ã‚‰åŠ¹åŠ›ã‚’ç”Ÿã˜ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚</p>
    
    <p><strong>[åˆ¶å®šæ—¥ã¾ãŸã¯æœ€çµ‚æ”¹å®šæ—¥: 2025å¹´6æœˆ17æ—¥]</strong></p>
  </div>
  <p>ä¸Šè¨˜ã®ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã«åŒæ„ã„ãŸã ã‘ã‚‹å ´åˆã¯ã€ã€ŒåŒæ„ã—ã¦æ¬¡ã¸é€²ã‚€ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚</p>
  <button onclick="agreeToPrivacyPolicy()">åŒæ„ã—ã¦æ¬¡ã¸é€²ã‚€</button>
</div>

<!-- åå‰ãƒ»ä¼šç¤¾åå…¥åŠ›ç”»é¢ -->
<div class="section hidden" id="nameSection">
  <p>ã‚ãªãŸã®ä¼šç¤¾åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>
  <input type="text" id="companyName" placeholder="ä¾‹: å®‰å…¨å»ºè¨­" />
  <p>ã‚ãªãŸã®åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>  
  <input type="text" id="userName" placeholder="ä¾‹: å®‰å…¨å¤ªéƒ" />
  <p>å½“ç¤¾æ‹…å½“è€…ãŒåˆ¤åˆ¥å‡ºæ¥ã‚Œã°åç§°ã¯ç°¡æ˜“çš„ãªã‚‚ã®ã§ã‚‚å¤§ä¸ˆå¤«ã§ã™ã€‚</p>
  <p>â€»ã‚¹ãƒšãƒ¼ã‚¹ï¼ˆç©ºç™½ï¼‰ã¯ä¸è¦ã§ã™</p>
  <br />
  <button onclick="startVideo()">â–¶ å‹•ç”»ã‚’é–‹å§‹ã™ã‚‹</button>
  <div id="errorMessage" class="error-message hidden"></div>
</div>

<div class="section hidden" id="videoSection">
  <div class="video-container">
    <video
      id="trainingVideo"
      playsinline
      controls="false"
      controlslist="nodownload nofullscreen noremoteplayback"
      disablePictureInPicture
      oncontextmenu="return false;"
    >
      <source src="training.mp4" type="video/mp4" />
      ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯ video ã‚¿ã‚°ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚
    </video>
  </div>
  <div id="customControls">
    <button onclick="togglePlayback()">â¯ï¸ ä¸€æ™‚åœæ­¢ / å†é–‹</button>
  </div>
  <div id="videoError" class="error-message hidden">
    å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚training.mp4 ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
  </div>
</div>

<div class="section hidden" id="quizIntroSection">
  <h3>e-Learningå‹•ç”»ã¯ä»¥ä¸Šã§ã™ã€‚</h3>
  <p>æ¬¡ã¯å‹•ç”»ã®ç†è§£åº¦ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã„ã¾ã™ã€‚</p>
  <button onclick="startQuiz()">å‹•ç”»ã®ç†è§£åº¦ãƒã‚§ãƒƒã‚¯ã«é€²ã‚€</button>
</div>

<div class="section hidden" id="quizSection">
  <div id="quizContainer">
    <p>å…¨3å•ã®ã‚¯ã‚¤ã‚ºã«å…¨å•æ­£è§£ã™ã‚‹ã¨ã€å—è¬›å®Œäº†ç™»éŒ²ã«é€²ã‚ã¾ã™ã€‚</p> 
    <p class="quiz-question" id="quizQuestion"></p>
    <div class="quiz-options" id="quizOptions"></div>
    <div class="quiz-message" id="quizMessage"></div>
    <button id="nextQuestionButton" onclick="goToNextQuestion()" class="hidden">æ¬¡ã¸é€²ã‚€</button>
  </div>
</div>

<div class="section hidden" id="resultSection">
  <h3>ä»¥ä¸Šã§ã€ä»Šæœˆã®e-Learningã¯çµ‚äº†ã¨ãªã‚Šã¾ã™ã€‚</h3>
  <p>å—è¬›è¨˜éŒ²ã®ä¿å­˜ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚</p>
  <br />
  <button id="submitButton">ğŸ“„ ä¿å­˜ã—ã¦çµ‚äº†ã™ã‚‹</button>
  <p id="submitMessage" style="margin-top: 1em; color: green;" class="hidden">ãŠç–²ã‚Œã•ã¾ã§ã—ãŸï¼æ¥æœˆã‚‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚</p>
</div>

</div>

<script>
  let lastKnownTime = 0; // å‹•ç”»ã®æœ€çµ‚å†ç”Ÿæ™‚åˆ»ã‚’ä¿æŒã™ã‚‹å¤‰æ•°
  let userName = ""; // ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’ä¿æŒã™ã‚‹å¤‰æ•°
  let companyName = ""; // ä¼šç¤¾åã‚’ä¿æŒã™ã‚‹å¤‰æ•°
  let deviceInfo = ""; // ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±ã‚’ä¿æŒã™ã‚‹å¤‰æ•°

  // åœ°åŸŸåˆ¶é™ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½ï¼ˆæ¡ˆBæ”¹è‰¯ç‰ˆï¼‰
  function checkGeolocation() {
    // è¤‡æ•°ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹æƒ…å ±ã‚µãƒ¼ãƒ“ã‚¹ã‚’è©¦è¡Œ
    const services = [
      "https://ipapi.co/json/",
      "https://api.ipgeolocation.io/ipgeo?apiKey=free",
      "https://ipinfo.io/json"
    ];

    function tryService(index) {
      if (index >= services.length) {
        // å…¨ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ãŒå¤±æ•—ã—ãŸå ´åˆã€å®‰å…¨ã®ãŸã‚ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯
        console.warn("åœ°åŸŸåˆ¤å®šã‚µãƒ¼ãƒ“ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¾ã™ã€‚");
        showMainContent();
        return;
      }

      fetch(services[index])
        .then(response => {
          if (!response.ok) {
            throw new Error('Network response was not ok');
          }
          return response.json();
        })
        .then(data => {
          const country = data.country || data.country_code || data.countryCode;
          const countryName = data.country_name || data.country || country;
          const ip = data.ip || data.query || "ä¸æ˜";

          if (country === "JP" || country === "Japan") {
            // æ—¥æœ¬ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã®å ´åˆã€ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤º
            showMainContent();
          } else {
            // æ—¥æœ¬ä»¥å¤–ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã®å ´åˆã€ã‚¨ãƒ©ãƒ¼ç”»é¢ã‚’è¡¨ç¤º
            showGeoError(countryName, ip);
          }
        })
        .catch(error => {
          console.error(`Service ${index + 1} failed:`, error);
          // æ¬¡ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’è©¦è¡Œ
          tryService(index + 1);
        });
    }

    tryService(0);
  }

  function showMainContent() {
    document.getElementById("loadingScreen").classList.add("hidden");
    document.getElementById("geoErrorScreen").classList.add("hidden");
    document.getElementById("mainContent").classList.remove("hidden");
    document.body.style.visibility = "visible";
  }

  function showGeoError(countryName, ip) {
    document.getElementById("loadingScreen").classList.add("hidden");
    document.getElementById("mainContent").classList.add("hidden");
    document.getElementById("locationInfo").textContent = `ç¾åœ¨ã®ã‚¢ã‚¯ã‚»ã‚¹å…ƒ: ${countryName || "ä¸æ˜"} (IP: ${ip})`;
    document.getElementById("geoErrorScreen").classList.remove("hidden");
    document.body.style.visibility = "visible";
  }

  // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«åœ°åŸŸåˆ¶é™ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œ
  document.addEventListener("DOMContentLoaded", function() {
    // å°‘ã—å¾…ã£ã¦ã‹ã‚‰åœ°åŸŸåˆ¶é™ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œï¼ˆUXå‘ä¸Šã®ãŸã‚ï¼‰
    setTimeout(checkGeolocation, 1000);
  });

  // ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã«åŒæ„ã—ã¦æ¬¡ã¸é€²ã‚€
  function agreeToPrivacyPolicy() {
    document.getElementById("privacySection").classList.add("hidden");
    document.getElementById("nameSection").classList.remove("hidden");
  }

  // æ”¹è‰¯ç‰ˆï¼šã‚ˆã‚Šæ­£ç¢ºãªãƒ‡ãƒã‚¤ã‚¹æƒ…å ±ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°
function generateDeviceInfo() {
  const userAgent = navigator.userAgent;
  let os = "Unknown OS";
  let browser = "Unknown Browser";
  
  // ã‚¿ãƒƒãƒãƒ‡ãƒã‚¤ã‚¹åˆ¤å®šï¼ˆiOSåˆ¤å®šã®è£œåŠ©ï¼‰
  const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
  
  // OSåˆ¤å®šï¼ˆiOSã®ç‰¹æ®Šå¯¾å¿œï¼‰
  if (userAgent.indexOf("Windows") !== -1) {
    os = "Windows";
  } else if (userAgent.indexOf("iPhone") !== -1) {
    os = "iOS (iPhone)";
  } else if (userAgent.indexOf("iPad") !== -1) {
    os = "iOS (iPad)";
  } else if (userAgent.indexOf("Mac") !== -1) {
    // Macã‹iPadã‹ã®åˆ¤å®šï¼ˆiOS 13+ã®iPadã¯Macã®UserAgentã‚’ä½¿ã†ï¼‰
    if (isTouchDevice && navigator.platform === 'MacIntel') {
      // ã‚¿ãƒƒãƒå¯¾å¿œ + MacIntel = é«˜ç¢ºç‡ã§iPad
      os = "iOS (iPad)";
    } else {
      os = "macOS";
    }
  } else if (userAgent.indexOf("Android") !== -1) {
    os = "Android";
  } else if (userAgent.indexOf("Linux") !== -1) {
    os = "Linux";
  }
  
  // ãƒ–ãƒ©ã‚¦ã‚¶åˆ¤å®šï¼ˆå„ªå…ˆé †ä½ãŒé‡è¦ï¼ï¼‰
  if (userAgent.indexOf("Edg") !== -1 || userAgent.indexOf("Edge") !== -1) {
    browser = "Edge";
  } else if (userAgent.indexOf("OPR") !== -1 || userAgent.indexOf("Opera") !== -1) {
    browser = "Opera";
  } else if (userAgent.indexOf("Firefox") !== -1 || userAgent.indexOf("FxiOS") !== -1) {
    browser = "Firefox";
  } else if (userAgent.indexOf("SamsungBrowser") !== -1) {
    browser = "Samsung Browser";
  } else if (userAgent.indexOf("Chrome") !== -1 || userAgent.indexOf("CriOS") !== -1) {
    browser = "Chrome";
  } else if (userAgent.indexOf("Safari") !== -1) {
    browser = "Safari";
  }
  
  return `${os} / ${browser}`;
}

// ãƒ†ã‚¹ãƒˆç”¨ï¼šç¾åœ¨ã®ãƒ–ãƒ©ã‚¦ã‚¶æƒ…å ±ã‚’è¡¨ç¤º
console.log("ç¾åœ¨ã®ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±:", generateDeviceInfo());
console.log("UserAgent:", navigator.userAgent);

// ã‚ˆã‚Šè©³ç´°ãªæƒ…å ±ãŒæ¬²ã—ã„å ´åˆã®æ‹¡å¼µç‰ˆ
function generateDetailedDeviceInfo() {
  const userAgent = navigator.userAgent;
  let os = "Unknown OS";
  let browser = "Unknown Browser";
  let version = "";
  
  // ã‚¿ãƒƒãƒãƒ‡ãƒã‚¤ã‚¹åˆ¤å®š
  const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
  
  // OSåˆ¤å®šï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ä»˜ãï¼‰
  if (userAgent.indexOf("Windows NT 10.0") !== -1) {
    os = "Windows 10/11";
  } else if (userAgent.indexOf("Windows NT 6.3") !== -1) {
    os = "Windows 8.1";
  } else if (userAgent.indexOf("Windows NT 6.1") !== -1) {
    os = "Windows 7";
  } else if (userAgent.indexOf("Windows") !== -1) {
    os = "Windows";
  } else if (userAgent.indexOf("iPhone") !== -1) {
    const iosMatch = userAgent.match(/OS (\d+_\d+)/);
    os = iosMatch ? `iOS ${iosMatch[1].replace('_', '.')} (iPhone)` : "iOS (iPhone)";
  } else if (userAgent.indexOf("iPad") !== -1) {
    const iosMatch = userAgent.match(/OS (\d+_\d+)/);
    os = iosMatch ? `iOS ${iosMatch[1].replace('_', '.')} (iPad)` : "iOS (iPad)";
  } else if (userAgent.indexOf("Mac") !== -1) {
    // Macã‹iPadã‹ã®åˆ¤å®š
    if (isTouchDevice && navigator.platform === 'MacIntel') {
      os = "iOS (iPad)";
    } else {
      os = "macOS";
    }
  } else if (userAgent.indexOf("Android") !== -1) {
    const androidMatch = userAgent.match(/Android (\d+\.?\d*)/);
    os = androidMatch ? `Android ${androidMatch[1]}` : "Android";
  } else if (userAgent.indexOf("Linux") !== -1) {
    os = "Linux";
  }
  
  // ãƒ–ãƒ©ã‚¦ã‚¶åˆ¤å®šï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ä»˜ãï¼‰
  if (userAgent.indexOf("Edg/") !== -1) {
    const edgeMatch = userAgent.match(/Edg\/(\d+\.\d+)/);
    version = edgeMatch ? edgeMatch[1] : "";
    browser = version ? `Edge ${version}` : "Edge";
  } else if (userAgent.indexOf("OPR/") !== -1) {
    const operaMatch = userAgent.match(/OPR\/(\d+\.\d+)/);
    version = operaMatch ? operaMatch[1] : "";
    browser = version ? `Opera ${version}` : "Opera";
  } else if (userAgent.indexOf("Firefox/") !== -1) {
    const firefoxMatch = userAgent.match(/Firefox\/(\d+\.\d+)/);
    version = firefoxMatch ? firefoxMatch[1] : "";
    browser = version ? `Firefox ${version}` : "Firefox";
  } else if (userAgent.indexOf("FxiOS/") !== -1) {
    browser = "Firefox (iOS)";
  } else if (userAgent.indexOf("SamsungBrowser/") !== -1) {
    const samsungMatch = userAgent.match(/SamsungBrowser\/(\d+\.\d+)/);
    version = samsungMatch ? samsungMatch[1] : "";
    browser = version ? `Samsung Browser ${version}` : "Samsung Browser";
  } else if (userAgent.indexOf("Chrome/") !== -1) {
    const chromeMatch = userAgent.match(/Chrome\/(\d+\.\d+)/);
    version = chromeMatch ? chromeMatch[1] : "";
    browser = version ? `Chrome ${version}` : "Chrome";
  } else if (userAgent.indexOf("CriOS/") !== -1) {
    browser = "Chrome (iOS)";
  } else if (userAgent.indexOf("Safari/") !== -1) {
    const safariMatch = userAgent.match(/Version\/(\d+\.\d+)/);
    version = safariMatch ? safariMatch[1] : "";
    browser = version ? `Safari ${version}` : "Safari";
  }
  
  return `${os} / ${browser}`;
}
  
  // ã‚¯ã‚¤ã‚ºã®å•é¡Œãƒ‡ãƒ¼ã‚¿ï¼ˆ10å•ï¼‰
  const quizQuestions = [
    {
      question: "è­¦å¯Ÿç½²ã‚„åŠ´åƒåŸºæº–ç›£ç£ç½²ã¸ã®å ±å‘Šã¯ï¼Ÿ",
      options: ["å…ƒè«‹ã«ãŠé¡˜ã„ã—ã¦å ±å‘Šã—ã¦ã‚‚ã‚‰ã†", "ä¼šç¤¾ã«é€£çµ¡ã—ã¦å ±å‘Šã—ã¦ã‚‚ã‚‰ã†", "ãƒ¤ãƒãã†ã ã£ãŸã®ã§è‡ªåˆ†ã§å ±å‘Šã™ã‚‹", "å¿…è¦ãªã„"],
      answer: "å…ƒè«‹ã«ãŠé¡˜ã„ã—ã¦å ±å‘Šã—ã¦ã‚‚ã‚‰ã†"
    },
    {
      question: "åŠ´ç½ã‹ã©ã†ã‹ã®åˆ¤å®šã‚’è¡Œã†ã®ã¯ï¼Ÿ",
      options: ["åŠ´åƒåŸºæº–ç›£ç£ç½²", "åŒ»å¸«", "å…ƒè«‹", "æ•‘æ€¥éšŠå“¡"],
      answer: "åŠ´åƒåŸºæº–ç›£ç£ç½²"
    },
    {
      question: "ä¼‘æ¥­ï¼”æ—¥ä»¥ä¸Šã®ç½å®³ãŒç™ºç”Ÿã—ãŸå ´åˆã€å®¢å…ˆã«ã¯ä½•æ—¥ä»¥å†…ã«å ±å‘Šã™ã‚‹ï¼Ÿ",
      options: ["ï¼“æ—¥ä»¥å†…", "ï¼”æ—¥ä»¥å†…", "ï¼•æ—¥ä»¥å†…", "ï¼—æ—¥ä»¥å†…"],
      answer: "ï¼“æ—¥ä»¥å†…"
    },
    {
      question: "ã€ŒåŠ´åƒè€…æ­»å‚·ç—…å ±å‘Šã€ãŒå¿…è¦ãªã¨ãã¯ã©ã“ã«æå‡ºã™ã‚‹ï¼Ÿ",
      options: ["æ‰€è½„ã®åŠ´åƒåŸºæº–ç›£ç£ç½²", "æ‰€è½„ã®ç¨å‹™ç½²", "æ‰€è½„ã®æ¶ˆé˜²ç½²", "æ‰€è½„ã®æ£®æ—ç®¡ç†ç½²"],
      answer: "æ‰€è½„ã®åŠ´åƒåŸºæº–ç›£ç£ç½²"
    },
    {
      question: "è­¦å¯Ÿç½²ã‚„åŠ´åƒåŸºæº–ç›£ç£ç½²ã®äº‹æƒ…è´å–ã¸ã¯ï¼Ÿ",
      options: ["å…ƒè«‹ã‘ã®æŒ‡å°ã«å¾“ã„å”åŠ›ã™ã‚‹", "æ€’ã‚‰ã‚Œã‚‹ã®ã§é€ƒã’ã‚‹", "è‡ªåˆ†ãŒæ‚ªè€…ã«ãªã‚‰ãªã„ã‚ˆã†ã«å˜˜ã‚’ã¤ã", "é»™ç§˜ã™ã‚‹"],
      answer: "å…ƒè«‹ã‘ã®æŒ‡å°ã«å¾“ã„å”åŠ›ã™ã‚‹"
    },
    {
      question: "ç—…é™¢ã®æ²»ç™‚è²»ã‚„è–¬ä»£ãŒã‹ã‹ã£ãŸã¨ãã¯ï¼Ÿ",
      options: ["å…ƒè«‹ã®æ‹…å½“è€…ãŒä½œæˆã—ãŸæ›¸é¡ã‚’ãã‚Œãã‚Œã®ç®‡æ‰€ã«æå‡ºã™ã‚‹", "è¢«ç½è€…ã®è‡ªè…¹", "ç¾å ´æ‹…å½“ç¤¾å“¡ã®çµ¦æ–™ã‹ã‚‰å¼•ã‹ã‚Œã‚‹", "äº‹æ•…ã®ç¾å ´ã‚’è¦‹ã¦ã„ãŸäººã§å‰²ã‚Šå‹˜"],
      answer: "å…ƒè«‹ã®æ‹…å½“è€…ãŒä½œæˆã—ãŸæ›¸é¡ã‚’ãã‚Œãã‚Œã®ç®‡æ‰€ã«æå‡ºã™ã‚‹"
    },
    {
      question: "ã€ŒåŠ´ç½éš ã—ã€ã®ç½°ã¨ã¯ï¼Ÿ",
      options: ["æ›¸é¡é€æ¤œã‚’ã•ã‚ŒãŸã‚Šã€ï¼•ï¼ä¸‡å††ä»¥ä¸‹ã®ç½°é‡‘åˆ‘", "è­¦å¯Ÿã¨ç›£ç£ç½²ã«æ€’ã‚‰ã‚Œã‚‹", "åçœæ–‡", "ä½•ã‚’ã•ã‚Œã‚‹ã‹ã‚ã‹ã‚‰ãªã„"],
      answer: "æ›¸é¡é€æ¤œã‚’ã•ã‚ŒãŸã‚Šã€ï¼•ï¼ä¸‡å††ä»¥ä¸‹ã®ç½°é‡‘åˆ‘"
    },
    {
      question: "åŠ´åƒç½å®³ç™ºç”Ÿæ™‚ã®è¡Œå‹•ã¯èª°ã®æŒ‡ç¤ºã‚’ä»°ãï¼Ÿ",
      options: ["å…ƒè«‹ã‘", "è·é•·", "è‡ªåˆ†ã§è€ƒãˆã¦è¡Œå‹•ã™ã‚‹", "è¢«ç½è€…æœ¬äºº"],
      answer: "å…ƒè«‹ã‘"
    },
    {
      question: "å¾“æ¥­å“¡ãŒä½œæ¥­ä¸­ã«è»½ã„æ“¦ã‚Šå‚·ã‚’è² ã£ãŸã¨ãã€æ­£ã—ã„å¯¾å¿œã¯ï¼Ÿ",
      options: ["è»½å¾®ãªã‚±ã‚¬ã§ã‚‚ã€ã¾ãšã¯å ±å‘Šã•ã›ã‚‹", "å¿™ã—ã„ã®ã§ã€è‡ªå·±åˆ¤æ–­ã§å‡¦ç½®ã—ã¦æ¥­å‹™ã«æˆ»ã‚‰ã›ã‚‹", "è»½å‚·ãªã®ã§å ±å‘Šã®å¿…è¦ã¯ãªã„", "å¤§ã‘ãŒã§ãªã‘ã‚Œã°æ—¥å ±ã«ã ã‘æ›¸ã‘ã°ã‚ˆã„"],
      answer: "è»½å¾®ãªã‚±ã‚¬ã§ã‚‚ã€ã¾ãšã¯å ±å‘Šã•ã›ã‚‹"
    },
    {
      question: "æ¬¡ã®ã†ã¡ã€åŠ´ç½éš ã—ã‚’é˜²æ­¢ã™ã‚‹ãŸã‚ã«æ—¥å¸¸çš„ã«ã§ãã‚‹ã“ã¨ã¯ï¼Ÿ",
      options: ["ä¼‘æ†©ã®éš›ã‚„ã€ãã®æ—¥ã®ä½œæ¥­çµ‚äº†æ™‚ã«ã€ã‚±ã‚¬ãªã©ãŒãªã‹ã£ãŸã‹å ±å‘Šã•ã›ã‚‹", "ä½œæ¥­å“¡ã«ã€Œè‡ªå·±è²¬ä»»ã§å¯¾å¿œã™ã‚‹ã‚ˆã†ã«ã€ã¨ä¼ãˆã‚‹", "å•é¡ŒãŒèµ·ããŸã¨ãã ã‘ãƒ’ã‚¢ãƒªãƒ³ã‚°ã‚’è¡Œã†", "ä½œæ¥­å“¡ã®ç„¡äº‹ã‚’ç¥ˆã‚‹"],
      answer: "ä¼‘æ†©ã®éš›ã‚„ã€ãã®æ—¥ã®ä½œæ¥­çµ‚äº†æ™‚ã«ã€ã‚±ã‚¬ãªã©ãŒãªã‹ã£ãŸã‹å ±å‘Šã•ã›ã‚‹"
    }
  ];

  let selectedQuizQuestions = []; // å®Ÿéš›ã«è¡¨ç¤ºã™ã‚‹3å•ã‚’æ ¼ç´
  let currentQuestionIndex = 0; // ç¾åœ¨è¡¨ç¤ºä¸­ã®ã‚¯ã‚¤ã‚ºã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
  let correctAnswersCount = 0; // æ­£è§£æ•°

  function showError(message) {
    const errorElement = document.getElementById("errorMessage");
    errorElement.textContent = message;
    errorElement.classList.remove("hidden");
  }

  function hideError() {
    const errorElement = document.getElementById("errorMessage");
    errorElement.classList.add("hidden");
  }

  function startVideo() {
    const nameInput = document.getElementById("userName");
    const companyInput = document.getElementById("companyName");
    userName = nameInput.value.trim(); // ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«ä¿å­˜
    companyName = companyInput.value.trim(); // ä¼šç¤¾åã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«ä¿å­˜

    hideError(); // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¯ãƒªã‚¢

    // 1. ä¼šç¤¾åãƒã‚§ãƒƒã‚¯
    if (!companyName) {
      showError("ä¼šç¤¾åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
      return;
    }

    // 2. åå‰ãŒç©ºæ¬„ã®å ´åˆ
    if (!userName) {
      showError("åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
      return;
    }

    // 3. åå‰ã®æ–‡å­—æ•°ãƒã‚§ãƒƒã‚¯ï¼ˆ3æ–‡å­—ä»¥ä¸Šã‚’è¨±å¯ï¼‰
    if (userName.length < 3) {
      showError("åå‰ã¯3æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
      return;
    }

    // 4. åŠè§’æ–‡å­—ã®ãƒã‚§ãƒƒã‚¯ï¼ˆå…¨è§’ã²ã‚‰ãŒãªã€ã‚«ã‚¿ã‚«ãƒŠã€æ¼¢å­—ã®ã¿ã‚’è¨±å¯ï¼‰
    const zenkakuRegex = /^[ã-ã‚“ã‚¡-ãƒ¶ä¸€-é¾ ]+$/;
    if (!zenkakuRegex.test(userName)) {
      showError("åå‰ã¯å…¨è§’ã®ã²ã‚‰ãŒãªã€ã‚«ã‚¿ã‚«ãƒŠã€ã¾ãŸã¯æ¼¢å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆã‚¹ãƒšãƒ¼ã‚¹ã‚„åŠè§’æ–‡å­—ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“ï¼‰ã€‚");
      return;
    }

    // åå‰å…¥åŠ›ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ã¿éè¡¨ç¤º
    document.getElementById("nameSection").classList.add("hidden");
    document.getElementById("videoSection").classList.remove("hidden");

    const video = document.getElementById("trainingVideo");

    // å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯
    video.addEventListener('error', function() {
      document.getElementById("videoError").classList.remove("hidden");
    });

    // ã‚·ãƒ¼ã‚¯ãƒãƒ¼æ“ä½œã‚’ç„¡åŠ¹åŒ–
    video.removeAttribute('controls'); 
    
    // å³ã‚¯ãƒªãƒƒã‚¯ç„¡åŠ¹åŒ–
    video.addEventListener('contextmenu', function(e) {
      e.preventDefault();
      return false;
    });
    
    // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆç„¡åŠ¹åŒ–
    video.addEventListener('keydown', function(e) {
      e.preventDefault();
      return false;
    });

    // å‹•ç”»ã®å†ç”Ÿæ™‚åˆ»ãŒæ›´æ–°ã•ã‚Œã‚‹ãŸã³ã«ãƒã‚§ãƒƒã‚¯
    video.addEventListener('timeupdate', function() {
      // æ—©é€ã‚Šé˜²æ­¢
      if (video.currentTime > lastKnownTime + 1 && !video.paused) {
        video.currentTime = lastKnownTime;
      } else {
        lastKnownTime = video.currentTime;
      }
    });

    // ã‚·ãƒ¼ã‚¯æ“ä½œã‚’ç„¡åŠ¹åŒ–
    video.addEventListener('seeking', function(e) {
      e.preventDefault();
      video.currentTime = lastKnownTime;
    });
    
    // å‹•ç”»ã®å†ç”Ÿã‚’è©¦è¡Œ
    video.play().catch(function(error) {
      console.error('Video play failed:', error);
      document.getElementById("videoError").classList.remove("hidden");
    });

    video.addEventListener("ended", () => {
      document.getElementById("videoSection").classList.add("hidden");
      document.getElementById("quizIntroSection").classList.remove("hidden");
    });
  }

  function togglePlayback() {
    const video = document.getElementById("trainingVideo");
    if (video.paused) {
      video.play().catch(function(error) {
        console.error('Video play failed:', error);
      });
    } else {
      video.pause();
    }
  }

  // é…åˆ—ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã™ã‚‹é–¢æ•°
  function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  function startQuiz() {
    document.getElementById("quizIntroSection").classList.add("hidden");
    document.getElementById("quizSection").classList.remove("hidden");
    
    // ã‚¯ã‚¤ã‚ºã®çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ
    currentQuestionIndex = 0;
    correctAnswersCount = 0;
    document.getElementById("quizMessage").innerText = "";
    document.getElementById("nextQuestionButton").classList.add("hidden");

    // 10å•ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«3å•é¸æŠ
    selectedQuizQuestions = shuffleArray([...quizQuestions]).slice(0, 3);
    
    displayQuestion();
  }

  function displayQuestion() {
    const questionContainer = document.getElementById("quizQuestion");
    const optionsContainer = document.getElementById("quizOptions");
    const messageContainer = document.getElementById("quizMessage");
    const nextButton = document.getElementById("nextQuestionButton");

    messageContainer.innerText = "";
    nextButton.classList.add("hidden");

    if (currentQuestionIndex < selectedQuizQuestions.length) {
      const questionData = selectedQuizQuestions[currentQuestionIndex];
      questionContainer.innerText = `Q${currentQuestionIndex + 1}. ${questionData.question}`;
      optionsContainer.innerHTML = "";

      // é¸æŠè‚¢ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
      const shuffledOptions = shuffleArray([...questionData.options]);

      shuffledOptions.forEach((option, index) => {
        const button = document.createElement("button");
        button.innerText = option;
        button.onclick = () => checkAnswer(option);
        optionsContainer.appendChild(button);
      });
    } else {
      // å…¨å•è§£ç­”æ¸ˆã¿ã®å ´åˆã€çµæœã‚’è¡¨ç¤º
      showResult();
    }
  }

  function checkAnswer(selectedOption) {
    const questionData = selectedQuizQuestions[currentQuestionIndex];
    const messageContainer = document.getElementById("quizMessage");
    const optionsContainer = document.getElementById("quizOptions");
    const nextButton = document.getElementById("nextQuestionButton");

    // å…¨ã¦ã®é¸æŠè‚¢ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
    Array.from(optionsContainer.children).forEach(button => {
      button.disabled = true;
    });

    if (selectedOption === questionData.answer) {
      correctAnswersCount++;
      messageContainer.innerText = "æ­£è§£ã§ã™ï¼";
      messageContainer.classList.remove("incorrect");
      messageContainer.classList.add("correct");
    } else {
      messageContainer.innerText = `ä¸æ­£è§£ã§ã™ã€‚æ­£è§£ã¯ã€Œ${questionData.answer}ã€ã§ã—ãŸã€‚`;
      messageContainer.classList.remove("correct");
      messageContainer.classList.add("incorrect");
    }

    nextButton.classList.remove("hidden");
  }

  function goToNextQuestion() {
    currentQuestionIndex++;
    displayQuestion();
  }

  function showResult() {
    const quizSection = document.getElementById("quizSection");
    const resultSection = document.getElementById("resultSection");
    const quizContainer = document.getElementById("quizContainer");

    quizSection.classList.add("hidden");

    if (correctAnswersCount === selectedQuizQuestions.length) {
      // å…¨å•æ­£è§£ã®å ´åˆ
      deviceInfo = generateDeviceInfo(); // ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±ã‚’ç”Ÿæˆ
      
      // çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º
      resultSection.classList.remove("hidden");
    } else {
      // ä¸æ­£è§£ãŒã‚ã‚‹å ´åˆ
      resultSection.classList.add("hidden");
      quizContainer.innerHTML = `
        <p>æ®‹å¿µï¼å…¨å•æ­£è§£ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚å†åº¦æŒ‘æˆ¦ã—ã¦ãã ã•ã„ã€‚</p>
        <button onclick="restartQuiz()">å†åº¦æŒ‘æˆ¦ã™ã‚‹</button>
      `;
      quizSection.classList.remove("hidden");
    }
  }

  function restartQuiz() {
    document.getElementById("quizContainer").innerHTML = `
      <p>å…¨3å•ã®ã‚¯ã‚¤ã‚ºã«å…¨å•æ­£è§£ã™ã‚‹ã¨ã€å—è¬›å®Œäº†ç™»éŒ²ã«é€²ã‚ã¾ã™ã€‚</p> 
      <p class="quiz-question" id="quizQuestion"></p>
      <div class="quiz-options" id="quizOptions"></div>
      <div class="quiz-message" id="quizMessage"></div>
      <button id="nextQuestionButton" onclick="goToNextQuestion()" class="hidden">æ¬¡ã¸é€²ã‚€</button>
    `;
    startQuiz();
  }

  function generateCode(name) {
    const firstCharCode = name.charCodeAt(0);
    const lastCharCode = name.charCodeAt(name.length - 1);
    const nameLength = name.length;

    const day = new Date().getMonth() + 1;
    const dayPlus11 = String(day + 11).padStart(2, "0");
    const reversedDay = dayPlus11.split("").reverse().join("");

    return `${firstCharCode}-${lastCharCode}-${nameLength}-${reversedDay}`;
  }

  function submitToSpreadsheet(code) {
    const timestamp = new Date().toLocaleString();

    return fetch("https://script.google.com/macros/s/AKfycbymwKMUUI7ertLjxxLvff-K1_tE-gYgCcx3jluNxoCTlGLiJtO0m2nYIBNYraUlVdFj/exec", {
      method: "POST",
      mode: "no-cors",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        company: companyName,
        name: userName,
        datetime: timestamp,
        code: deviceInfo
      })
    }).catch(function(error) {
      console.error('ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆé€ä¿¡ã‚¨ãƒ©ãƒ¼:', error);
    });
  }

  // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å¾Œã®å‡¦ç†
  document.addEventListener("DOMContentLoaded", function () {
    const submitButton = document.getElementById("submitButton");
    const submitMessage = document.getElementById("submitMessage");

    submitButton.addEventListener("click", function () {
      // ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡
      submitToSpreadsheet(deviceInfo);
      
      // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
      submitMessage.textContent = "ä¿å­˜ã—ã¾ã—ãŸã€‚ç”»é¢ã‚’é–‰ã˜ã¦çµ‚äº†ã—ã¦ãã ã•ã„ã€‚";
      submitMessage.style.color = "blue";
      submitMessage.classList.remove("hidden");
      
      // ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤ºã«ã™ã‚‹
      submitButton.style.display = "none";
    });
  });
</script>

</body>
</html>